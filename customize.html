<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TJDWMQZV');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8" />
  <title>Customize Your Trek</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/pages/itinerary.css" />
  <style>
    /* Additional modal styles for auth and welcome modals */
    .auth-icon, .welcome-icon {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      animation: iconBounce 0.6s ease-out 0.2s both;
    }
    
    .auth-icon svg, .welcome-icon svg {
      width: 28px;
      height: 28px;
      stroke: white;
      stroke-width: 2;
    }
    
    .auth-benefits {
      margin: 20px 0;
      text-align: left;
    }
    
    .benefit-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
      color: #374151;
    }
    
    .benefit-icon {
      width: 16px;
      height: 16px;
      margin-right: 10px;
      flex-shrink: 0;
      stroke: #10b981;
    }
    
    .welcome-icon {
      background: linear-gradient(135deg, #10b981, #059669);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJDWMQZV"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Hero Header -->
  <header class="relative bg-cover bg-center h-64 flex items-center justify-center text-white" style="background-image: url('Images/alps.jpg');">
    <div class="bg-black bg-opacity-50 p-6 rounded-lg">
      <h1 class="text-3xl font-bold mb-2">Customize Your Trek</h1>
      <h2 id="greeting" class="text-lg font-medium">Tell us more about your ideal trekking experience</h2>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-3xl mx-auto p-6">
    <form id="customization-form" class="space-y-6">
      <!-- Accommodation -->
      <div>
        <h3 class="text-xl font-semibold mb-2 flex items-center gap-2">
          üèïÔ∏è Accommodation Type
        </h3>
        <div class="flex gap-3">
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="accommodation" data-value="Camping">Camping</button>
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="accommodation" data-value="Hut-to-Hut">Hut-to-Hut</button>
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="accommodation" data-value="Luxury Lodges">Luxury Lodges</button>
        </div>
      </div>

      <!-- Difficulty -->
      <div>
        <h3 class="text-xl font-semibold mb-2 flex items-center gap-2">
          üèîÔ∏è Difficulty
        </h3>
        <div class="flex gap-3">
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="difficulty" data-value="Easy">Easy</button>
          <button type="button" class="filter-btn active py-2 px-4 rounded-lg" data-category="difficulty" data-value="Moderate">Moderate</button>
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="difficulty" data-value="Challenging">Challenging</button>
        </div>
      </div>

      <!-- Technical -->
      <div>
        <h3 class="text-xl font-semibold mb-2 flex items-center gap-2">
          ü•æ Technical Requirements
        </h3>
        <div class="flex gap-3">
          <button type="button" class="filter-btn active py-2 px-4 rounded-lg" data-category="technical" data-value="None">None</button>
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="technical" data-value="Scrambling">Scrambling</button>
          <button type="button" class="filter-btn py-2 px-4 rounded-lg" data-category="technical" data-value="Mountaineering">Mountaineering</button>
        </div>
      </div>

      <!-- Comments -->
      <div>
        <label for="comments" class="block mb-1 font-medium">Describe your dream trek ‚Äî the more detail, the better!</label>
        <textarea id="comments" name="comments" rows="4" class="w-full p-2 border border-gray-300 rounded-md" placeholder="e.g. 8-day hike in Peru with scenic views, not too steep, local food stops, stay in eco-lodges..."></textarea>
      </div>

      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-md">Generate Itinerary</button>
    </form>

    <div id="accordion-controls" class="my-6 hidden text-center">
      <button id="toggle-all" class="bg-gray-200 hover:bg-gray-300 text-sm px-4 py-2 rounded">Expand All</button>
    </div>

    <div id="itinerary-cards" class="space-y-4 mt-8"></div>
  </main>

  <!-- Success Modal -->
  <div class="modal-overlay" id="itinerary-success-modal" style="display: none;">
    <div class="modal">
      <button class="close-button" onclick="closeSuccessModal()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <div class="success-icon">
        <svg class="checkmark" viewBox="0 0 24 24">
          <polyline points="20,6 9,17 4,12"></polyline>
        </svg>
      </div>
      
      <h2 class="modal-title">Itinerary Saved Successfully!</h2>
      <p class="modal-message">Your travel itinerary has been saved to your account. You can access it anytime from your saved itineraries.</p>
      
      <div class="button-group">
        <a href="my-itineraries.html" class="button button-primary">
          View Saved Itineraries
        </a>
        <button class="button button-secondary" onclick="closeSuccessModal()">
          Continue Planning
        </button>
      </div>
    </div>
  </div>

  <!-- Authentication Required Modal -->
  <div class="modal-overlay" id="auth-required-modal" style="display: none;">
    <div class="modal">
      <button class="close-button" onclick="closeAuthModal()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <div class="auth-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12l2 2 4-4"/>
          <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
          <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
          <path d="M12 3v18"/>
        </svg>
      </div>
      
      <h2 class="modal-title">Save Your Adventure</h2>
      <p class="modal-message">Create a free account to save your custom itinerary and access it anytime, anywhere.</p>
      
      <div class="auth-benefits">
        <div class="benefit-item">
          <svg class="benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Save unlimited itineraries</span>
        </div>
        <div class="benefit-item">
          <svg class="benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Access from any device</span>
        </div>
        <div class="benefit-item">
          <svg class="benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Get personalized recommendations</span>
        </div>
      </div>
      
      <div class="button-group">
        <button class="button button-primary" onclick="redirectToSignUp()">
          Create Free Account
        </button>
        <button class="button button-secondary" onclick="redirectToSignIn()">
          I Have an Account
        </button>
      </div>
    </div>
  </div>

  <!-- Welcome Back Modal -->
  <div class="modal-overlay" id="welcome-back-modal" style="display: none;">
    <div class="modal">
      <button class="close-button" onclick="closeWelcomeModal()" aria-label="Close">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <div class="welcome-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22,4 12,14.01 9,11.01"/>
        </svg>
      </div>
      
      <h2 class="modal-title">Welcome to Smart Trails!</h2>
      <p class="modal-message">Your itinerary has been saved successfully. You're now part of our trekking community!</p>
      
      <div class="button-group">
        <a href="my-itineraries.html" class="button button-primary">
          View My Itineraries
        </a>
        <button class="button button-secondary" onclick="closeWelcomeModal()">
          Continue Planning
        </button>
      </div>
    </div>
  </div>

  <!-- Add type="module" to js scripts -->
  <script src="js/utils/itinerary.js" type="module"></script>
  
  <!-- Changed to the correct path and added type="module" -->
  <script src="js/pages/customize.js" type="module"></script>
  
  <script src="js/components/navbar.js" type="module"></script>
</body>
</html>